-- Serviços
local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer
local PlayerGui = LocalPlayer:WaitForChild("PlayerGui")

-- GUI simples
local screenGui = Instance.new("ScreenGui", PlayerGui)
screenGui.ResetOnSpawn = false

local frame = Instance.new("Frame", screenGui)
frame.Size = UDim2.new(0, 250, 0, 100)
frame.Position = UDim2.new(0.5, -125, 0.5, -50)
frame.BackgroundColor3 = Color3.fromRGB(25,25,25)
frame.Active = true
frame.Draggable = true
local corner = Instance.new("UICorner", frame)
corner.CornerRadius = UDim.new(0,12)

local textBox = Instance.new("TextBox", frame)
textBox.Size = UDim2.new(1,-20,0,35)
textBox.Position = UDim2.new(0,10,0,10)
textBox.PlaceholderText = "Digite o nome do jogador"
textBox.BackgroundColor3 = Color3.fromRGB(40,40,40)
textBox.TextColor3 = Color3.fromRGB(255,255,255)
textBox.ClearTextOnFocus = false
textBox.Font = Enum.Font.Gotham
textBox.TextSize = 16
local tCorner = Instance.new("UICorner", textBox)
tCorner.CornerRadius = UDim.new(0,8)

local button = Instance.new("TextButton", frame)
button.Size = UDim2.new(1,-20,0,35)
button.Position = UDim2.new(0,10,0,55)
button.Text = "Trollar"
button.BackgroundColor3 = Color3.fromRGB(255,255,255)
button.TextColor3 = Color3.fromRGB(25,25,25)
button.Font = Enum.Font.GothamBold
button.TextSize = 16
local bCorner = Instance.new("UICorner", button)
bCorner.CornerRadius = UDim.new(0,8)

-- Função Trollar
local function TrollPlayer()
    local targetName = textBox.Text
    if targetName == "" then warn("Digite o nome do jogador!") return end
    local target = Players:FindFirstChild(targetName)
    if not target or not target.Character then warn("Jogador não encontrado") return end

    local char = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
    local hum = char:WaitForChild("Humanoid")
    local root = char:WaitForChild("HumanoidRootPart")
    local tRoot = target.Character:FindFirstChild("HumanoidRootPart")
    local tHum = target.Character:FindFirstChild("Humanoid")
    if not tRoot or not tHum then return end

    local originalPos = root.Position
    local RE = ReplicatedStorage:WaitForChild("RE")

    -- Limpar ferramentas e pegar Couch
    RE:WaitForChild("1Clea1rTool1s"):FireServer("ClearAllTools")
    task.wait(0.2)
    RE:WaitForChild("1Too1l"):InvokeServer("PickingTools", "Couch")
    task.wait(0.3)
    local tool = LocalPlayer.Backpack:FindFirstChild("Couch")
    if tool then
        tool.Parent = char
        hum:EquipTool(tool)
    end

    -- Spin grudado abaixo do jogador (altura dos pés)
    local rotating = true
    local rotateSpeed = 190
    local rotationConn
    rotationConn = RunService.Heartbeat:Connect(function()
        if rotating and char and tRoot then
            local angle = tick() * rotateSpeed
            local radius = 3
            root.CFrame = tRoot.CFrame * CFrame.new(math.cos(angle)*radius, -2, math.sin(angle)*radius) * CFrame.Angles(0, math.rad(angle), 0)
        end
    end)

    -- Teleporte para coordenada após 1,2 segundos
    task.delay(1.2, function()
        rotating = false
        root.CFrame = CFrame.new(Vector3.new(675,9,482))

        -- Aplicar crazyVector no alvo
        if target and target.Character and target.Character:FindFirstChild("HumanoidRootPart") then
            local crazyVector = Vector3.new(
                math.random(1e14, 1e15),
                math.random(1e14, 1e15),
                math.random(1e14, 1e15)
            )
            local args = {
                [1] = target.Character.HumanoidRootPart,
                [2] = target.Character.HumanoidRootPart,
                [3] = crazyVector,
                [4] = target.Character.HumanoidRootPart.Position,
                [5] = LocalPlayer.Backpack:FindFirstChild("Assault") and LocalPlayer.Backpack.Assault:FindFirstChild("GunScript_Local") and LocalPlayer.Backpack.Assault.GunScript_Local:FindFirstChild("MuzzleEffect"),
                [6] = LocalPlayer.Backpack:FindFirstChild("Assault") and LocalPlayer.Backpack.Assault:FindFirstChild("GunScript_Local") and LocalPlayer.Backpack.Assault.GunScript_Local:FindFirstChild("HitEffect"),
                [7] = 0,
                [8] = 0,
                [9] = { [1] = false },
                [10] = {
                    [1] = 25,
                    [2] = Vector3.new(100,100,100),
                    [3] = BrickColor.new(29),
                    [4] = 0.25,
                    [5] = Enum.Material.SmoothPlastic,
                    [6] = 0.25
                },
                [11] = true,
                [12] = false
            }
            local remote = RE:FindFirstChild("SomeRemote") -- Substituir pelo Remote correto
            if remote then
                remote:FireServer(unpack(args))
            end
        end

        -- Loop 5s equipando/desequipando Couch
        if tool then
            local startTime = tick()
            while tick() - startTime < 5 do
                if tool.Parent == char then
                    tool.Parent = LocalPlayer.Backpack
                else
                    tool.Parent = char
                    hum:EquipTool(tool)
                end
                task.wait(0.3)
            end
        end

        -- Garantir que Couch fique na backpack no final
        if tool and tool.Parent == char then
            tool.Parent = LocalPlayer.Backpack
        end
    end)

    -- Voltar para posição original após 3s
    task.delay(3, function()
        root.CFrame = CFrame.new(originalPos)
    end)
end

button.MouseButton1Click:Connect(TrollPlayer)
